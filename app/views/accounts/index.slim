.py-3= back_link
h1= t '.accounts'
= render 'currencies_select'
- if currency.present?
  = render 'table', items: accounts do
    tr
      - AccountDecorator.table_columns.each do |column|
        = account_table_head_column column, currency, totals
- else
  = render 'table', items: accounts

/hr
/table.table.table-striped.table-hover.table-narrow
  /thead.thead-dark
    /tr 
      /th= t '.member'
      /th.text-right= t '.currency'
      /th.text-right= t '.deposited'
      /th.text-right= t '.withdrawn'
      /th.text-right 
        /div= t '.estimated_amount'
        /= column_tip t('.estimated_amount_tip', default: 'Deposited - Withdrawn')
      /th.text-right
        /div= t '.amounts_divergence'
        /= column_tip t('.amounts_divergence_tip', default: 'Estimated - Actual')
      /th.text-right 
        /div= t '.actual_amount'
        /= column_tip t('.actual_amount_tip', default: 'Available + Locked')
      /th.text-right= t '.available_balance'
      /th.text-right= t '.locked'
      /th.text-right= t '.sold'
      /th.text-right= t '.bought'
      /th= middot
  /tbody
    /- accounts.each do |account|
      /tr is='dapi-tr' data-href=account_path(account)
        /td= render 'member_brief', member: account.member
        /td.text-right= format_currency account.currency_id
        /td.text-right= format_money account.total_deposit_amount, account.currency_id
        /td.text-right= format_money account.total_withdraw_amount, account.currency_id
        /td.text-right= format_money account.estimated_amount, account.currency_id
        /td.text-right= format_divergence account.estimated_amount - account.amount, account.currency_id
        /td.text-right= format_money account.amount, account.currency_id
        /td.text-right= format_money account.balance, account.currency_id
        /td.text-right= format_money account.locked, account.currency_id
        /td.text-right= format_money account.total_sell, account.currency_id
        /td.text-right= format_money account.total_buy, account.currency_id
        /td
          /- if account.trades.empty?
            /span.text-muted= t '.no_trades'
          /- else
            /= link_to trades_path(member_id: account.member_id) do
              /= t '.trades', count: account.trades.count

= paginate accounts
